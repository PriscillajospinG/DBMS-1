<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>
  <style>
    body.dark-mode {
      background-color: #121212;
      color: #ffffff;
    }

    input, button, select {
      display: block;
      margin: 8px 0;
      padding: 8px;
    }

    h2, h3 {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>Welcome Admin</h2>
  <button class="dark-mode-toggle" onclick="toggleDarkMode()">ğŸŒ™ Toggle Mode</button>

  <section>
    <h3>Add Employee</h3>
    <form id="addEmployeeForm">
      <input type="text" placeholder="Name" id="employee_name" required />
      <input type="text" placeholder="Department" id="department" required />
      <input type="text" placeholder="Position" id="position" required />
      <input type="date" id="hire_date" required />
      <input type="number" placeholder="Base Salary" id="base_salary" required />
      <input type="password" placeholder="Password" id="password" required />
      <button type="submit">Add</button>
    </form>
  </section>

  <section>
    <h3>All Employees</h3>
    <button onclick="getAllEmployees()">ğŸ”„ Refresh List</button>
    <ul id="employeeList"></ul>
  </section>

  <section>
    <h3>Delete Employee</h3>
    <input type="number" placeholder="Employee ID" id="deleteId" />
    <button onclick="deleteEmployee()">ğŸ—‘ï¸ Delete</button>
  </section>

  <section>
    <h3>Mark Attendance</h3>
    <input type="number" placeholder="Employee ID" id="attEmpId" />
    <select id="attStatus">
      <option value="Present">Present</option>
      <option value="Absent">Absent</option>
    </select>
    <button onclick="markAttendance()">âœ”ï¸ Mark</button>
  </section>

  <button onclick="logout()">ğŸšª Logout</button>

  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
    }

    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
      }

      const role = localStorage.getItem('role');
      if (role !== 'admin') {
        alert('Access denied. Redirecting to login.');
        window.location.href = '/login.html';
      } else {
        getAllEmployees(); // auto-refresh employee list
      }
    };

    function logout() {
      localStorage.clear();
      window.location.href = '/login.html';
    }
  </script>

  <script src="js/admin_dashboard.js"></script>
</body>
</html>