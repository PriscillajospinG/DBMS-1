<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Admin Dashboard</title>

</head>
<body>
  <h2>Welcome Admin</h2>
  <button class="dark-mode-toggle" onclick="toggleDarkMode()">🌙 Toggle Mode</button>

  <section>
    <h3>Add Employee</h3>
    <form id="addEmployeeForm">
      <input type="text" placeholder="Name" id="employee_name" required />
      <input type="text" placeholder="Department" id="department" required />
      <input type="text" placeholder="Position" id="position" required />
      <input type="date" id="hire_date" required />
      <input type="number" placeholder="Base Salary" id="base_salary" required />
      <input type="password" placeholder="Password" id="password" required />
      <button type="submit">Add</button>
    </form>
  </section>

  <section>
    <h3>All Employees</h3>
    <button onclick="getAllEmployees()">🔄 Refresh List</button>
    <ul id="employeeList"></ul>
  </section>

  <section>
    <h3>Delete Employee</h3>
    <input type="number" placeholder="Employee ID" id="deleteId" />
    <button onclick="deleteEmployee()">🗑️ Delete</button>
  </section>

  <section>
    <h3>Mark Attendance</h3>
    <input type="number" placeholder="Employee ID" id="attEmpId" />
    <select id="attStatus">
      <option value="Present">Present</option>
      <option value="Absent">Absent</option>
    </select>
    <button onclick="markAttendance()">✔️ Mark</button>
  </section>

  <section>
    <h3>Update Employee</h3>
    <input type="number" id="updateId" placeholder="Employee ID to update" required>
    <input type="text" id="updateName" placeholder="Updated Name">
    <input type="text" id="updateDept" placeholder="Updated Department">
    <input type="text" id="updatePos" placeholder="Updated Position">
    <input type="date" id="updateDate" placeholder="Updated Hire Date">
    <input type="number" id="updateSalary" placeholder="Updated Base Salary">
    <input type="password" id="updatePwd" placeholder="Updated Password">
    <button onclick="updateEmployee()">✏️ Update Employee</button>
  </section>

  <button onclick="logout()">🚪 Logout</button>

  <script>
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
    }

    window.onload = () => {
      if (localStorage.getItem('theme') === 'dark') {
        document.body.classList.add('dark-mode');
      }

      const role = localStorage.getItem('role');
      if (role !== 'admin') {
        alert('Access denied. Redirecting to login.');
        window.location.href = '/login.html';
      } else {
        getAllEmployees(); // auto-refresh employee list
      }
    };

    function logout() {
      localStorage.clear();
      window.location.href = '/login.html';
    }
  </script>
  <link rel="stylesheet" href="css/style.css" />

  <script src="js/admin_dashboard.js"></script>
</body>
</html>